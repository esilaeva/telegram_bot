# –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫
# –í google colab –¥–æ–±–∞–≤–∏—Ç—å: !pip install pyTelegramBotAPI
# –í google colab –¥–æ–±–∞–≤–∏—Ç—å: !pip install Faker
# –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤ —Ñ–∞–π–ª requirements.text –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫–∏
# 'PyTelegramBotApi'
# 'faker'
import json
import os
from dotenv import load_dotenv, find_dotenv
import time
from secrets import token_urlsafe

from faker import Faker
from telebot import TeleBot, types

load_dotenv(find_dotenv())

bot = TeleBot(os.getenv('TOKEN'), parse_mode='html')  # —Å–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞
faker = Faker()  # —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–º–µ—Ä–æ–≤ –∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö –∫–∞—Ä—Ç

# –æ–±—ä–µ–∫—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
card_type_kb = types.ReplyKeyboardMarkup(resize_keyboard=True)
card_type_kb.row(types.KeyboardButton(text='VISA'), types.KeyboardButton(text='Mastercard'))  # –ø–µ—Ä–≤—ã–π —Ä—è–¥ –∫–Ω–æ–ø–æ–∫
card_type_kb.row(types.KeyboardButton(text='Maestro'), types.KeyboardButton(text='JCB'))  # –≤—Ç–æ—Ä–æ–π —Ä—è–¥ –∫–Ω–æ–ø–æ–∫
card_type_kb.add('–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ')

# –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –º–µ–Ω—é
menu_kb = types.InlineKeyboardMarkup()
btn1 = types.InlineKeyboardButton('–ö—Ä–µ–¥–∏—Ç–Ω—ã–µ –∫–∞—Ä—Ç—ã', callback_data='cards')
btn2 = types.InlineKeyboardButton('–ü—Ä–æ–≤–µ—Ä–∫–∞ JSON', callback_data='json')
menu_kb.add(btn1, btn2)
btn3 = types.InlineKeyboardButton('–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ', callback_data='data')
btn4 = types.InlineKeyboardButton('–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã', callback_data='files')
menu_kb.add(btn3, btn4)

# –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
data_kb = types.ReplyKeyboardMarkup(resize_keyboard=True)
data_kb.row(types.KeyboardButton(text="1Ô∏è‚É£"), types.KeyboardButton(text="2Ô∏è‚É£"))
data_kb.row(types.KeyboardButton(text="5Ô∏è‚É£"), types.KeyboardButton(text="üîü"))
data_kb.add('–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ')

# –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è json
json_kb = types.ReplyKeyboardMarkup(resize_keyboard=True)
json_kb.row(types.KeyboardButton(text="–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ"))

choose = ''
# –ú–∞—Å—Å–∏–≤ —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏ —Ñ–∞–π–ª–æ–≤. –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å, –∏ –¥–æ–±–∞–≤—è—Ç—Å—è/—É–¥–∞–ª—è—Ç—Å—è –∫–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ.
formats = ['.jpg', '.png', '.svg', '.gif', '.ico', '.mp4', '.avi', '.webm', '.doc', '.docx', '.xls', '.xlsx', '.txt',
           '.pdf', '.css', '.html', '.js', '.json', '.zip', '.rar']


# –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã '/start'
@bot.message_handler(commands=['start', 'menu'])
def start(message: types.Message):
    # –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É '/start'
    bot.send_message(message.chat.id, '–ü—Ä–∏–≤–µ—Ç!', reply_markup=types.ReplyKeyboardRemove())
    bot.send_message(message.chat.id, '–ß—Ç–æ –±—É–¥–µ–º –¥–µ–ª–∞—Ç—å? –í—ã–±–∏—Ä–∞–π', reply_markup=menu_kb)


def format_card_number(card_number):
    return " ".join([card_number[i:i + 4] for i in range(0, len(card_number) - 6, 4)])


@bot.callback_query_handler(func=lambda callback: True)
def callback_message(callback):
    global choose
    if callback.data == 'cards':
        bot.send_message(callback.message.chat.id,
                         '–ü—Ä–∏–≤–µ—Ç! –Ø —É–º–µ—é –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–º–µ—Ä–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç\n–í—ã–±–µ—Ä–∏ —Ç–∏–ø –∫–∞—Ä—Ç—ã:',
                         reply_markup=card_type_kb)
        choose = 'cards'
    elif callback.data == 'json':
        bot.send_message(callback.message.chat.id,
                         '–ü—Ä–∏–≤–µ—Ç! –¢—ã –≤—ã–±—Ä–∞–ª <b>JSON</b>. \n–Ø —É–º–µ—é –ø—Ä–æ–≤–µ—Ä—è—Ç—å JSON –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –≤ –∫—Ä–∞—Å–∏–≤—ã–π '
                         '—Ç–µ–∫—Å—Ç\n–í–≤–µ–¥–∏ JSON –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ –≤–µ—Ä–Ω–∏—Å—å –≤ –Ω–∞—á–∞–ª–æ:', reply_markup=json_kb)
        choose = 'json'
    elif callback.data == 'data':
        bot.send_message(callback.message.chat.id, "–ü—Ä–∏–≤–µ—Ç! –¢—ã –≤—ã–±—Ä–∞–ª <b>–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ</b>. \n–î–∞–≤–∞–π —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º "
                                                   "—Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –í—ã–±–µ—Ä–∏ —Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ç–µ–±–µ –Ω—É–∂–Ω–æ üëáüèª",
                                                    reply_markup=data_kb)
        choose = 'data'
    elif callback.data == 'files':
        # –ù–∞—á–∞–ª—å–Ω—ã–π —à–∞–≥ #1. –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è, –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤—ã–±—Ä–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞.
        # –° –ø–æ–º–æ—â—å—é —Ö—ç–Ω–¥–ª–µ—Ä–∞ –≥–æ–≤–æ—Ä–∏–º, —á—Ç–æ –¥–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–æ–Ω—Ç–∞–∫—Ç–µ —Å –±–æ—Ç–æ–º –∫–æ–º–∞–Ω–¥–æ–π /start.

        # –ü–æ–ª—É—á–∞–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –Ω–µ–º—É –ø–æ –∏–º–µ–Ω–∏.
        username = callback.message.from_user.first_name

        # –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø–æ–¥ –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è. –¢–∞–º –æ—Ç—Ä–∏—Å—É—é—Ç—Å—è –≤—Å–µ –∫–Ω–æ–ø–∫–∏ –∏–∑ –º–∞—Å—Å–∏–≤–∞ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏.
        # –ú–∞–∫—Å–∏–º—É–º –±—É–¥–µ—Ç 5 –∫–Ω–æ–ø–æ–∫ –≤ —Ä—è–¥ (–ø–∞—Ä–∞–º–µ—Ç—Ä row_width=5).
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        markup.add(*formats, row_width=5)

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
        reply = bot.send_message(callback.message.chat.id,
                                 f"–ü—Ä–∏–≤–µ—Ç! –¢—ã –≤—ã–±—Ä–∞–ª <b>–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã</b>üëãüèª\n–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≥—Ä–∞–Ω–∏—á–Ω—ã–µ "
                                 f"–∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–æ–≤ —Ä–∞–∑–Ω–æ–≥–æ –≤–µ—Å–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –∏ –Ω–∞ –≤–µ–±-—Å–∞–π—Ç–∞—Ö. –Ø —É–º–µ—é "
                                 f"–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π —Ä–∞–∑–º–µ—Ä–æ–º –æ—Ç 1 –±–∞–π—Ç–∞ –¥–æ 45 –º–µ–≥–∞–±–∞–π—Ç "
                                 f"–≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ.\n\n–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å, –≤—ã–±–µ—Ä–∏ –æ–¥–Ω–æ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –≤ –º–µ–Ω—é –Ω–∏–∂–µ ‚¨áÔ∏è",
                                 reply_markup=markup)

        # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ #2. –í–≤–µ–¥–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –æ—Ç–≤–µ—Ç –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏
        # check_format().
        bot.register_next_step_handler(reply, check_format)
        choose = 'files'


# –®–∞–≥ #2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è. –ï—Å–ª–∏ –≤—Å—ë —Ö–æ—Ä–æ—à–æ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤—ã–±–æ—Ä–æ–º –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è.
def check_format(message):
    # –ü—Ä–æ–≤–µ—Ä–∏–º, –µ—Å–ª–∏ –Ω–∞ –¥–∞–Ω–Ω–æ–º —à–∞–≥–µ –ø–æ–ª—É—á–∞–µ–º –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ–º–∞–Ω–¥—É "–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ" –∏–ª–∏ "/start".
    if message.text == '–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ' or message.text == '/start':
        # –¢–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –ø–µ—Ä–≤—ã–π –Ω–∞—á–∞–ª—å–Ω—ã–π —à–∞–≥.
        start(message)
    # –ò–Ω–∞—á–µ, –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è, –µ—Å—Ç—å –ª–∏ —Ç–∞–∫–æ–µ –≤ –Ω–∞—à–µ–º –º–∞—Å—Å–∏–≤–µ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏.
    elif message.text in formats:
        # –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≤—ã–±–æ—Ä–∞ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è.
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        markup.add("B (–±–∞–π—Ç—ã)", "KB (–∫–∏–ª–æ–±–∞–π—Ç—ã)", "MB (–º–µ–≥–∞–±–∞–π—Ç—ã)", "–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ")

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –≤—ã–±—Ä–∞—Ç—å –µ–¥–∏–Ω–∏—Ü—É –∏–∑–º–µ—Ä–µ–Ω–∏—è.
        reply = bot.send_message(message.chat.id,
                                 f"üîπ –í—ã–±—Ä–∞–Ω–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ ‚Äî <b>{message.text}</b>\n\n–¢–µ–ø–µ—Ä—å –≤—ã–±–µ—Ä–∏ –µ–¥–∏–Ω–∏—Ü—É –∏–∑–º–µ—Ä–µ–Ω–∏—è.\n<u>–ù–µ–±–æ–ª—å—à–∞—è –ø–∞–º—è—Ç–∫–∞ –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º:</u>\n1 –∫–∏–ª–æ–±–∞–π—Ç = 1 024 –±–∞–π—Ç–∞\n1 –º–µ–≥–∞–±–∞–π—Ç = 1 024 –∫–∏–ª–æ–±–∞–π—Ç–∞ = 1 048 576 –±–∞–π—Ç",
                                 reply_markup=markup)

        # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ #3. –í–≤–µ–¥–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –æ—Ç–≤–µ—Ç –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏
        # check_unit(). –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–µ–º —Ç—É–¥–∞ –æ–±—ä–µ–∫—Ç —Ç–µ–∫—É—â–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        # (message). –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —à–∞–≥–æ–≤.
        bot.register_next_step_handler(reply, check_unit, message)
    # –ò–Ω–∞—á–µ, –µ—Å–ª–∏ —Ç–∞–∫–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –Ω–µ –æ–∫–∞–∑–∞–ª–æ—Å—å –≤ –º–∞—Å—Å–∏–≤–µ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ—à–∏–±–∫–æ–π –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –≤—ã–±—Ä–∞—Ç—å
    # –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ.
    else:
        # –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –∏–∑ –Ω–∞—à–µ–≥–æ –º–∞—Å—Å–∏–≤–∞, –∫–∞–∫ –Ω–∞ –ø–µ—Ä–≤–æ–º —à–∞–≥–µ.
        # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤ –∫–æ–Ω—Ü–µ –¥–æ–±–∞–≤–∏–º –∫–Ω–æ–ø–∫—É "–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ" –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞ –Ω–∞—á–∞–ª—å–Ω—ã–π —à–∞–≥.
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        markup.add(*formats, row_width=5)
        markup.add("–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ")

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ—à–∏–±–∫–æ–π.
        reply = bot.send_message(message.chat.id,
                                 f"–í—ã–±—Ä–∞–Ω–æ –Ω–µ–≤–µ—Ä–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –≤—ã–±–µ—Ä–∏ –æ–¥–Ω–æ –∏–∑ –º–µ–Ω—é –Ω–∏–∂–µ üôÇ‚¨áÔ∏è",
                                 reply_markup=markup)
        # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø–µ—Ä–µ—Ö–æ–¥ —Å–Ω–æ–≤–∞ –Ω–∞ —à–∞–≥ #2. –í–≤–µ–¥–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –æ—Ç–≤–µ—Ç –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏
        # check_format().
        bot.register_next_step_handler(reply, check_format)


# –®–∞–≥ #3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è. –ï—Å–ª–∏ –≤—Å—ë —Ö–æ—Ä–æ—à–æ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –≤–≤–µ—Å—Ç–∏ —Ä–∞–∑–º–µ—Ä
# —Ñ–∞–π–ª–∞.
def check_unit(message, format):
    # –ü—Ä–æ–≤–µ—Ä–∏–º, –µ—Å–ª–∏ –Ω–∞ –¥–∞–Ω–Ω–æ–º —à–∞–≥–µ –ø–æ–ª—É—á–∞–µ–º –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ–º–∞–Ω–¥—É "–ù–∞–∑–∞–¥".
    if message.text == '–ù–∞–∑–∞–¥':
        # –¢–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ —à–∞–≥ #2 "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è". –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º (
        # format), —á—Ç–æ –æ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å –∏ –Ω–µ –ø—Ä–∏—à–ª–æ—Å—å –≤—ã–±–∏—Ä–∞—Ç—å —Å–Ω–æ–≤–∞.
        check_format(format)

    # –ò–Ω–∞—á–µ –ø—Ä–æ–≤–µ—Ä–∏–º, –µ—Å–ª–∏ –Ω–∞ –¥–∞–Ω–Ω–æ–º —à–∞–≥–µ –ø–æ–ª—É—á–∞–µ–º –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ–º–∞–Ω–¥—É "–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ" –∏–ª–∏ "/start".
    elif message.text == '–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ' or message.text == '/start':
        # –¢–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –ø–µ—Ä–≤—ã–π –Ω–∞—á–∞–ª—å–Ω—ã–π —à–∞–≥.
        start(message)
    elif message.text in ['B (–±–∞–π—Ç—ã)', 'KB (–∫–∏–ª–æ–±–∞–π—Ç—ã)', 'MB (–º–µ–≥–∞–±–∞–π—Ç—ã)']:
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        markup.add('–ù–∞–∑–∞–¥', '–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ')

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –≤–≤–µ—Å—Ç–∏ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞.
        reply = bot.send_message(message.chat.id,
                                 f"üîπ –í—ã–±—Ä–∞–Ω–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ ‚Äî <b>{format.text}</b>\nüîπ –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è ‚Äî <b>{message.text}</b>\n\n–û—Å—Ç–∞–ª—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥, –Ω–∞–ø–∏—à–∏ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞. –Ø –ø—Ä–∏–Ω–∏–º–∞—é —Ç–æ–ª—å–∫–æ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –∏ –ø—Ä–æ—á–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤.\n‚õîÔ∏è <u>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä—É:</u>\n<b>–ú–∏–Ω–∏–º—É–º</b> ‚Äî 1 –±–∞–π—Ç\n<b>–ú–∞–∫—Å–∏–º—É–º</b> ‚Äî 45 MB (—ç—Ç–æ 46¬†080 KB –∏–ª–∏ 47¬†185¬†920 –±–∞–π—Ç)",
                                 reply_markup=markup)

        # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ #4. –í–≤–µ–¥–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –æ—Ç–≤–µ—Ç –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏
        # check_size(). –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–µ–º —Ç—É–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º (format), —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –µ–≥–æ.
        # –ò —Ç–∞–∫–∂–µ –ø–µ—Ä–µ–¥–∞–µ–º —Ç—É–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤—ã–±—Ä–∞–Ω–Ω–æ–π –µ–¥–∏–Ω–∏—Ü–µ–π –∏–∑–º–µ—Ä–µ–Ω–∏—è (message), —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –µ—ë.
        bot.register_next_step_handler(reply, check_size, format, message)

    # –ò–Ω–∞—á–µ, –µ—Å–ª–∏ –µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –Ω–µ–≤–µ—Ä–Ω–∞—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ—à–∏–±–∫–æ–π –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –≤—ã–±—Ä–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é.
    else:
        # –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≤—ã–±–æ—Ä–∞ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è: –±–∞–π—Ç—ã, –∫–∏–ª–æ–±–∞–π—Ç—ã –∏–ª–∏ –º–µ–≥–∞–±–∞–π—Ç—ã.
        # –¢–∞–∫–∂–µ –≤–Ω–∏–∑—É –¥–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ", –æ–Ω–∞ –≤–µ—Ä–Ω–µ—Ç –Ω–∞ –ø–µ—Ä–≤—ã–π –Ω–∞—á–∞–ª—å–Ω—ã–π —à–∞–≥.
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        markup.add('B (–±–∞–π—Ç—ã)', 'KB (–∫–∏–ª–æ–±–∞–π—Ç—ã)', 'MB (–º–µ–≥–∞–±–∞–π—Ç—ã)', '–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ')

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ—à–∏–±–∫–æ–π.
        reply = bot.send_message(message.chat.id, f"–ù–µ–≤–µ—Ä–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏ –æ–¥–Ω—É –∏–∑ –º–µ–Ω—é –Ω–∏–∂–µ üôÇ",
                                 reply_markup=markup)

        # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø–µ—Ä–µ—Ö–æ–¥ —Å–Ω–æ–≤–∞ –Ω–∞ —à–∞–≥ #3. –í–≤–µ–¥–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –æ—Ç–≤–µ—Ç –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏
        # check_unit(). –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–µ–º —Ç—É–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º (format), —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –µ–≥–æ.
        bot.register_next_step_handler(reply, check_unit, format)


# –®–∞–≥ #4, –ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–≤–µ–¥–µ–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞. –ï—Å–ª–∏ –≤—Å—ë —Ö–æ—Ä–æ—à–æ, —Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ñ–∞–π–ª.
def check_size(message, format, unit):
    # –ü—Ä–æ–≤–µ—Ä–∏–º, –µ—Å–ª–∏ –Ω–∞ –¥–∞–Ω–Ω–æ–º —à–∞–≥–µ –ø–æ–ª—É—á–∞–µ–º –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ–º–∞–Ω–¥—É "–ù–∞–∑–∞–¥".
    if message.text == '–ù–∞–∑–∞–¥':
        # –¢–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ —à–∞–≥ #2 "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è". –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º
        # (format), —á—Ç–æ –æ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å –∏ –Ω–µ –ø—Ä–∏—à–ª–æ—Å—å –≤—ã–±–∏—Ä–∞—Ç—å —Å–Ω–æ–≤–∞.
        check_format(format)

    # –ò–Ω–∞—á–µ –ø—Ä–æ–≤–µ—Ä–∏–º, –µ—Å–ª–∏ –Ω–∞ –¥–∞–Ω–Ω–æ–º —à–∞–≥–µ –ø–æ–ª—É—á–∞–µ–º –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ–º–∞–Ω–¥—É "–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ" –∏–ª–∏ "/start".
    elif message.text == '–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ' or message.text == '/start':
        # –¢–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –ø–µ—Ä–≤—ã–π –Ω–∞—á–∞–ª—å–Ω—ã–π —à–∞–≥.
        start(message)

    # –ò–Ω–∞—á–µ –ø—Ä–æ–≤–µ—Ä–∏–º –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å. –ï—Å–ª–∏ –æ–Ω–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ, —Ç–æ –≤—ã–≤–µ–¥–µ–º –æ—à–∏–±–∫—É –∏ –ø–æ–ø—Ä–æ—Å–∏–º
    # –≤–≤–µ—Å—Ç–∏ —Å–Ω–æ–≤–∞. –ü—Ä–æ—Ö–æ–¥–∏–º 2 –ø—Ä–æ–≤–µ—Ä–∫–∏. –ü–µ—Ä–≤–∞—è isinstance() –ø—Ä–æ–≤–µ—Ä–∏—Ç, —á—Ç–æ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è None (–ø–æ-–ø—Ä–æ—Å—Ç–æ–º—É,
    # —á—Ç–æ –µ–≥–æ –Ω–µ—Ç). –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –æ—Ç—Å–µ—è—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–µ–∫—Å—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—à—å —Å—Ç–∏–∫–µ—Ä
    # –∏–ª–∏ –≥–∏—Ñ–∫—É). –í—Ç–æ—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ù–ï —è–≤–ª—è–µ—Ç—Å—è —á–∏—Å–ª–æ–º (not isdigit()). –û–Ω–∞ –æ—Ç—Å–µ–∏–≤–∞–µ—Ç —á–∏—Å–ª–∞ —Å
    # —Ç–æ—á–∫–∞–º–∏, –∑–Ω–∞–∫–∞–º–∏, –±—É–∫–≤–∞–º–∏ –∏ –ø—Ä–æ—á–∏–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏. –ú–µ–∂–¥—É –¥–≤—É–º—è –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä –ò–õ–ò (or). –ü–æ–ª—É—á–∞–µ—Ç—Å—è,
    # –µ—Å–ª–∏ –Ω–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç –ò–õ–ò –Ω–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á–∏—Å–ª–æ–º, —Ç–æ –≤—ã–≤–æ–¥–∏–º –æ—à–∏–±–∫—É.
    elif isinstance(message.text, type(None)) or not message.text.isdigit():
        # –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ "–ù–∞–∑–∞–¥" –∏ "–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ".
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        markup.add('–ù–∞–∑–∞–¥', '–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ')

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ—à–∏–±–∫–æ–π.
        reply = bot.send_message(message.chat.id,
                                 f"–ù–µ–≤–µ—Ä–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞ –≤–≤–µ–¥–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, —è –ø—Ä–∏–Ω–∏–º–∞—é —Ç–æ–ª—å–∫–æ —Ü–µ–ª—ã–µ "
                                 f"–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –∏ –ø—Ä–æ—á–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ üôÇ",
                                 reply_markup=markup)

        # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø–µ—Ä–µ—Ö–æ–¥ —Å–Ω–æ–≤–∞ –Ω–∞ —à–∞–≥ #4. –í–≤–µ–¥–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –æ—Ç–≤–µ—Ç –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏
        # check_size(). –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–µ–º —Ç—É–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º (format) –∏ –µ–¥–∏–Ω–∏—Ü–µ–π –∏–∑–º–µ—Ä–µ–Ω–∏—è
        # (unit), —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö.
        bot.register_next_step_handler(reply, check_size, format, unit)

    # –ò–Ω–∞—á–µ, –µ—Å–ª–∏ –≤—Å—ë –û–ö –∏ –±—ã–ª–æ –≤–≤–µ–¥–µ–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ, —Ç–æ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ä–∞–∑–º–µ—Ä–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞.
    else:
        # –ü–µ—Ä–µ–≤–æ–¥–∏–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Ä–∞–∑–º–µ—Ä–æ–º —Ñ–∞–π–ª–∞ –≤ —á–∏—Å–ª–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π.
        size = int(message.text)

        # –ü–æ—Å—á–∏—Ç–∞–µ–º –∏ —Å–æ—Ö—Ä–∞–Ω–∏–º —Ä–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö, –∞ —Ç–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω–∏–º –µ–¥–∏–Ω–∏—Ü—É –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤ –±–æ–ª–µ–µ –∫—Ä–∞—Ç–∫–æ–º –≤–∏–¥–µ –¥–ª—è
        # —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.
        if unit.text == 'MB (–º–µ–≥–∞–±–∞–π—Ç—ã)':
            size_bytes = size * 1024 * 1024
            unit_result_text = 'MB'
        elif unit.text == 'KB (–∫–∏–ª–æ–±–∞–π—Ç—ã)':
            size_bytes = size * 1024
            unit_result_text = 'KB'
        else:
            size_bytes = size
            unit_result_text = 'B'

        # –î–æ–±–∞–≤–∏–º –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞.
        # –ï—Å–ª–∏ –æ–Ω –º–µ–Ω—å—à–µ 1 –±–∞–π—Ç–∞ –∏–ª–∏ –±–æ–ª—å—à–µ 45 –º–µ–≥–∞–±–∞–π—Ç (47185920 –±–∞–π—Ç), —Ç–æ –≤—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.
        # –ò–Ω–∞—á–µ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞.
        if size_bytes < 1 or size_bytes > 47185920:
            reply = bot.send_message(message.chat.id,
                                     f"–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –º–æ–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π.\n<u>–ú–æ–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:</u>\n<b>–ú–∏–Ω–∏–º—É–º</b> ‚Äî 1 –±–∞–π—Ç\n<b>–ú–∞–∫—Å–∏–º—É–º</b> ‚Äî 45 MB (—ç—Ç–æ 46¬†080 KB –∏–ª–∏ 47¬†185¬†920 –±–∞–π—Ç)\n\n–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ä–∞–∑–º–µ—Ä üôÇ")
            # –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è —Å–Ω–æ–≤–∞ –Ω–∞ —à–∞–≥ #4 "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞" (—Ñ—É–Ω–∫—Ü–∏—è check_size). –ù–µ –∑–∞–±—ã–≤–∞–µ–º –ø–µ—Ä–µ–¥–∞—Ç—å —Ç—É–¥–∞
            # —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º —Ñ–∞–π–ª–∞ (format) –∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –µ–¥–∏–Ω–∏—Ü–µ–π –∏–∑–º–µ—Ä–µ–Ω–∏—è (unit).
            bot.register_next_step_handler(reply, check_size, format, unit)
        else:
            # –ï—Å–ª–∏ –≤—Å—ë –û–ö –∏ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º, —Ç–æ –ø–µ—Ä–µ–π–¥–µ–º –∫ –µ–≥–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –î–ª—è –Ω–∞—á–∞–ª–∞ —Å–¥–µ–ª–∞–µ–º,
            # —á—Ç–æ–±—ã —É —Ñ–∞–π–ª–∞ –≤—Å–µ–≥–¥–∞ –±—ã–ª–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å time, –ø–æ–ª—É—á–∏–º —Ç–µ–∫—É—â–∏–π
            # timestamp –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ. –ò–º—è —Ñ–∞–π–ª–∞ –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–µ–∫—É—â–∏–π timestamp, —Ä–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö –∏
            # –ø—Ä–∏–ø–∏—Å–∫—É bytes (–±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫ - 1681568233-43521321-bytes.png).
            timestamp = int(time.time())
            filename = f'{timestamp}-{size_bytes}-bytes{format.text}'

            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–∞–π–ª —Å –∑–∞–¥–∞–Ω–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º, –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Ç—É–¥–∞ —Å–ª—É—á–∞–π–Ω—ã–µ –±–∞–π—Ç—ã –≤ –Ω—É–∂–Ω–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å
            # –ø–æ–º–æ—â—å—é os.urandom().
            f = open(filename, "wb")
            random_bytes = os.urandom(size_bytes)
            f.write(random_bytes)
            f.close()

            # –°–¥–µ–ª–∞–µ–º "—É–º–Ω—ã–π" –≤—ã–≤–æ–¥ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è. –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω—ã
            # –º–µ–≥–∞–±–∞–π—Ç—ã –∏–ª–∏ –∫–∏–ª–æ–±–∞–π—Ç—ã, –≤—ã–≤–æ–¥–∏–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤ —Å–∫–æ–±–æ—á–∫–∞—Ö —Ä–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö. –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω—ã –±–∞–π—Ç—ã,
            # —Ç–æ –±—É–¥–µ–º –≤—ã–≤–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –∏—Ö. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–∏–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª —Å –ø–æ–º–æ—â—å—é .format(),
            # —á—Ç–æ–±—ã –±–æ–ª—å—à–∏–µ —á–∏—Å–ª–∞ –∫—Ä–∞—Å–∏–≤–æ –≤—ã–≥–ª—è–¥–µ–ª–∏ (–ø—Ä–∏–º–µ—Ä - 2 330 200 –±–∞–π—Ç).
            if unit_result_text == 'MB' or unit_result_text == 'KB':
                size_format = '{0:,}'.format(size).replace(',', ' ')
                size_bytes_format = '{0:,}'.format(size_bytes).replace(',', ' ')
                caption = f'üôåüèª –£—Ä–∞, —Ç–≤–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª–∏–∫ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º <b>{format.text}</b> —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω!\n\n–ï–≥–æ —Ä–∞–∑–º–µ—Ä ‚Äî <b>{size_format} {unit_result_text}</b>\n–í –±–∞–π—Ç–∞—Ö ‚Äî <b>{size_bytes_format} B</b>'
            else:
                size_bytes_format = '{0:,}'.format(size_bytes).replace(',', ' ')
                caption = f'üôåüèª –£—Ä–∞, —Ç–≤–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª–∏–∫ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º <b>{format.text}</b> —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω!\n\n–ï–≥–æ —Ä–∞–∑–º–µ—Ä ‚Äî <b>{size_bytes_format} {unit_result_text}</b>'

            # –û—Ç–∫—Ä—ã–≤–∞–µ–º –Ω–∞—à —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –µ–≥–æ –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç.
            # –ù–µ –∑–∞–±—ã–≤–∞–µ–º –≤ –ø–æ–¥–ø–∏—Å–∏ –∫ –Ω–µ–º—É (caption) –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞—à "—É–º–Ω—ã–π" —Ç–µ–∫—Å—Ç.
            # –ê —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–∏–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π "–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ".
            f = open(filename, "rb")
            markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
            markup.add('–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ')
            reply = bot.send_document(message.chat.id, f, caption=caption, reply_markup=markup)

            # –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–æ—Ü–µ–¥—É—Ä—É —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –∏ —É–¥–∞–ª—è–µ–º –µ–≥–æ, —á—Ç–æ–±—ã –æ–Ω –Ω–µ –∑–∞–Ω–∏–º–∞–ª –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ.
            # –ü–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –ø–µ—Ä–≤—ã–π –Ω–∞—á–∞–ª—å–Ω—ã–π —à–∞–≥ "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ".
            f.close()
            os.unlink(filename)
            bot.register_next_step_handler(reply, start)


# –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
@bot.message_handler()
def message_handler(message: types.Message):
    global choose, card_type
    if choose == 'cards':
        # –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å —Ç–µ–∫—Å—Ç–æ–º –∫–∞–∫–æ–π-–ª–∏–±–æ –∏–∑ –∫–Ω–æ–ø–æ–∫
        # –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –∫–∞—Ä—Ç—ã –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π 'card_type'
        if message.text == 'VISA':
            card_type = 'visa'
        elif message.text == 'Mastercard':
            card_type = 'mastercard'
        elif message.text == 'Maestro':
            card_type = 'maestro'
        elif message.text == 'JCB':
            card_type = 'jcb'
        elif message.text == '–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ' or message.text == '/start':
            start(message)
            return
        else:
            # –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç –Ω–µ —Å–æ–≤–ø–∞–ª –Ω–∏ —Å –æ–¥–Ω–æ–π –∏–∑ –∫–Ω–æ–ø–æ–∫ –≤—ã–≤–æ–¥–∏–º –æ—à–∏–±–∫—É
            bot.send_message(message.chat.id, '–ù–µ –ø–æ–Ω–∏–º–∞—é —Ç–µ–±—è :(')
            return

        # –ø–æ–ª—É—á–∞–µ–º –Ω–æ–º–µ—Ä —Ç–µ—Å—Ç–æ–≤–æ–π –∫–∞—Ä—Ç—ã –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞
        # card_type –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ–¥–Ω–æ –∏–∑ –∑–Ω–∞—á–µ–Ω–∏–π ['maestro', 'mastercard', 'visa13', 'visa16', 'visa19',
        # 'amex', 'discover', 'diners', 'jcb15', 'jcb16']

        card_info = faker.credit_card_full(card_type)

        list_card_info = card_info.split("\n")
        if card_type == 'maestro':
            card_number = format_card_number(list_card_info[2]) + "\n" + list_card_info[2][13:]
        else:
            card_number = format_card_number(list_card_info[2]) + "\n" + list_card_info[2][17:]
        list_card_info[2] = card_number
        format_card_info = "\n".join(list_card_info)

        # –∏ –≤—ã–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        bot.send_message(message.chat.id, f'–¢–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∞:\n<code>{format_card_info}</code>')
    elif choose == 'json':
        if message.text == '–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ' or message.text == '/start':
            start(message)
            return
        try:
            # –ø—ã—Ç–∞–µ–º—Å—è —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å JSON –∏–∑ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
            payload = json.loads(message.text)
        except json.JSONDecodeError as ex:
            # –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ 'json.JSONDecodeError'
            # –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ —Å—Ç—Ä–æ–∫—É –∏ –≤—ã–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            bot.send_message(message.chat.id, f'–ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞:\n<code>{str(ex)}</code>',
                             reply_markup=json_kb)
            # –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏
            return

            # –µ—Å–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–µ –≤–æ–∑–Ω–∏–∫–ª–æ - –∑–Ω–∞—á–∏—Ç –±—ã–ª –≤–≤–µ–¥–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON
            # —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –µ–≥–æ –≤ –∫—Ä–∞—Å–∏–≤—ã–π —Ç–µ–∫—Å—Ç :) (–æ—Ç—Å—Ç—É–ø 2 –ø—Ä–æ–±–µ–ª–∞ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–∏ –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É)
        text = json.dumps(payload, indent=2, sort_keys=True, ensure_ascii=False)
        # –∏ –≤—ã–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        bot.send_message(message.chat.id, f'JSON:\n<code>{text}</code>', reply_markup=json_kb)
    elif choose == 'data':
        # –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        # –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—à–∏–±–∫—É
        payload_len = 0
        if message.text == "1Ô∏è‚É£":
            payload_len = 1
        elif message.text == "2Ô∏è‚É£":
            payload_len = 2
        elif message.text == "5Ô∏è‚É£":
            payload_len = 5
        elif message.text == "üîü":
            payload_len = 10
        elif message.text == '–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ' or message.text == '/start':
            start(message)
            return
        else:
            bot.send_message(message.chat.id, "–ù–µ –ø–æ–Ω–∏–º–∞—é —Ç–µ–±—è :(")
            return

        # –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        # –ø—Ä–∏ –ø–æ–º–æ—â–∏ –º–µ—Ç–æ–¥–∞ simple_profile
        total_payload = []
        for _ in range(payload_len):
            user_info = faker.simple_profile()
            user_info['phone'] = f'+7{faker.msisdn()[3:]}'
            # –ø—Ä–∏ –ø–æ–º–æ—â–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ secrets –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–∞—Ä–æ–ª—å
            user_info['password'] = token_urlsafe(10)
            total_payload.append(user_info)

        # —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Å—Ç—Ä–æ–∫—É
        payload_str = json.dumps(
            obj=total_payload,
            indent=2,
            sort_keys=True,
            ensure_ascii=False,
            default=str
        )

        # –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        bot.send_message(message.chat.id, f"–î–∞–Ω–Ω—ã–µ {payload_len} —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:\n<code>"
                                          f"{payload_str}</code>")
        bot.send_message(message.chat.id, "–ï—Å–ª–∏ –Ω—É–∂–Ω—ã –µ—â–µ –¥–∞–Ω–Ω—ã–µ, –º–æ–∂–µ—à—å –≤—ã–±—Ä–∞—Ç—å –µ—â–µ —Ä–∞–∑ üëáüèª", reply_markup=data_kb)


# –≥–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã
def main():
    # –∑–∞–ø—É—Å–∫–∞–µ–º –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞
    bot.infinity_polling()


if __name__ == '__main__':
    main()
